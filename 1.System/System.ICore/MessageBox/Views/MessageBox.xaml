<Window x:Class="System.ICore.MessageBox.Views.MessageBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:System.ICore.MessageBox.Views"
             xmlns:viewModel="clr-namespace:System.ICore.MessageBox.ViewModels"
             mc:Ignorable="d" 
             Title="{Binding Caption}" Height="Auto" Width="Auto" MinHeight="168" MinWidth="334" MaxWidth="500" SizeToContent="WidthAndHeight"
             x:Name="window" WindowStyle="None" AllowsTransparency="True" BorderThickness="5" WindowStartupLocation="CenterOwner" Loaded="window_Loaded">
    <Window.Resources>

        <!--系统定义的颜色-->
        <SolidColorBrush x:Key="SystemColorBrush" Color="{DynamicResource SystemColor}"/>
        <Color x:Key="SystemColor" R="220" G="150" B="60" A="255"/>

        <SolidColorBrush x:Key="SystemColorBrush50" Color="{DynamicResource SystemColor50}"/>
        <Color x:Key="SystemColor50" R="#97" G="#A7" B="#C7" A="#FF"/>

        <!--Information消息图标-->
        <Style x:Key="Information" TargetType="Path">
            <Setter Property="Fill">
                <Setter.Value>
                    <RadialGradientBrush>
                        <GradientStop Color="{StaticResource SystemColor}" Offset="1"/>
                        <GradientStop Color="{StaticResource SystemColor}" Offset="0"/>
                    </RadialGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Data">
                <Setter.Value>
                    F0M2,18 A8,8 0 1 1 2.01,18z M2.46059417724609,8.22199249267578L3.14523696899414,8.6101188659668 3.40518951416016,9.62812805175781 3.1373405456543,11.8068542480469 2.38506317138672,14.4030609130859 1.91688537597656,15.1359405517578 1.47068023681641,15.2532424926758 1.45614624023438,15.2532424926758 0.856246948242188,14.9529495239258 0.472240447998047,14.3194046020508 0.358886748552322,13.4368362426758 0.809326112270355,10.7085647583008 1.28994941711426,9.39844512939453 1.83094024658203,8.50763702392578 2.46059417724609,8.22199249267578z M2.92236328125,5.08722686767578L3.460693359375,5.26667022705078 3.6328125,5.86359405517578 3.453369140625,6.84870147705078 2.9736328125,7.60309600830078 2.3583984375,7.89240264892578 2.33642578125,7.89240264892578 1.82006824016571,7.67450761795044 1.64794921875,7.06476593017578 1.84936511516571,6.13092803955078 2.30712890625,5.34357452392578 2.574462890625,5.14582061767578 2.92236328125,5.08722686767578z
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="Warning" TargetType="Path">
            <Setter Property="Fill">
                <Setter.Value>
                    <RadialGradientBrush>
                        <GradientStop Color="Orange" Offset="1"/>
                        <GradientStop Color="Orange" Offset="0"/>
                    </RadialGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Data">
                <Setter.Value>
                    F0M2,18 A8,8 0 1 1 2.01,18z M2.46059417724609,8.22199249267578L3.14523696899414,8.6101188659668 3.40518951416016,9.62812805175781 3.1373405456543,11.8068542480469 2.38506317138672,14.4030609130859 1.91688537597656,15.1359405517578 1.47068023681641,15.2532424926758 1.45614624023438,15.2532424926758 0.856246948242188,14.9529495239258 0.472240447998047,14.3194046020508 0.358886748552322,13.4368362426758 0.809326112270355,10.7085647583008 1.28994941711426,9.39844512939453 1.83094024658203,8.50763702392578 2.46059417724609,8.22199249267578z M2.92236328125,5.08722686767578L3.460693359375,5.26667022705078 3.6328125,5.86359405517578 3.453369140625,6.84870147705078 2.9736328125,7.60309600830078 2.3583984375,7.89240264892578 2.33642578125,7.89240264892578 1.82006824016571,7.67450761795044 1.64794921875,7.06476593017578 1.84936511516571,6.13092803955078 2.30712890625,5.34357452392578 2.574462890625,5.14582061767578 2.92236328125,5.08722686767578z
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="Question" TargetType="Path">
            <Setter Property="Fill">
                <Setter.Value>
                    <RadialGradientBrush>
                        <GradientStop Color="{StaticResource SystemColor}" Offset="1"/>
                        <GradientStop Color="{StaticResource SystemColor}" Offset="0"/>
                    </RadialGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Data">
                <Setter.Value>
                    F0M2,18 A8,8 0 1 1 2.01,18z M2.46059417724609,8.22199249267578L3.14523696899414,8.6101188659668 3.40518951416016,9.62812805175781 3.1373405456543,11.8068542480469 2.38506317138672,14.4030609130859 1.91688537597656,15.1359405517578 1.47068023681641,15.2532424926758 1.45614624023438,15.2532424926758 0.856246948242188,14.9529495239258 0.472240447998047,14.3194046020508 0.358886748552322,13.4368362426758 0.809326112270355,10.7085647583008 1.28994941711426,9.39844512939453 1.83094024658203,8.50763702392578 2.46059417724609,8.22199249267578z M2.92236328125,5.08722686767578L3.460693359375,5.26667022705078 3.6328125,5.86359405517578 3.453369140625,6.84870147705078 2.9736328125,7.60309600830078 2.3583984375,7.89240264892578 2.33642578125,7.89240264892578 1.82006824016571,7.67450761795044 1.64794921875,7.06476593017578 1.84936511516571,6.13092803955078 2.30712890625,5.34357452392578 2.574462890625,5.14582061767578 2.92236328125,5.08722686767578z
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="Error" TargetType="Path">
            <Setter Property="Fill">
                <Setter.Value>
                    <RadialGradientBrush>
                        <GradientStop Color="Red" Offset="1"/>
                        <GradientStop Color="Red" Offset="0"/>
                    </RadialGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Data">
                <Setter.Value>
                    F0M2,18 A8,8 0 1 1 2.01,18z M2.46059417724609,8.22199249267578L3.14523696899414,8.6101188659668 3.40518951416016,9.62812805175781 3.1373405456543,11.8068542480469 2.38506317138672,14.4030609130859 1.91688537597656,15.1359405517578 1.47068023681641,15.2532424926758 1.45614624023438,15.2532424926758 0.856246948242188,14.9529495239258 0.472240447998047,14.3194046020508 0.358886748552322,13.4368362426758 0.809326112270355,10.7085647583008 1.28994941711426,9.39844512939453 1.83094024658203,8.50763702392578 2.46059417724609,8.22199249267578z M2.92236328125,5.08722686767578L3.460693359375,5.26667022705078 3.6328125,5.86359405517578 3.453369140625,6.84870147705078 2.9736328125,7.60309600830078 2.3583984375,7.89240264892578 2.33642578125,7.89240264892578 1.82006824016571,7.67450761795044 1.64794921875,7.06476593017578 1.84936511516571,6.13092803955078 2.30712890625,5.34357452392578 2.574462890625,5.14582061767578 2.92236328125,5.08722686767578z
                </Setter.Value>
            </Setter>
        </Style>

        <BooleanToVisibilityConverter x:Key="booleanToVisibilityConverter" />



        <!--简单按钮样式-->
        <Style x:Key="simpleButtonStyle" TargetType="Button">
            <Setter Property="BorderBrush" Value="{StaticResource SystemColorBrush50}"/>
            <Setter Property="Foreground" Value="#303133"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="3" ShadowDepth="0"/>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="White" CornerRadius="2">
                            <TextBlock x:Name="txt" Text="{TemplateBinding Content}" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource SystemColorBrush}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource SystemColorBrush}"/>
                                <Setter TargetName="txt" Property="Foreground" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!--通用按钮样式-->
        <Style x:Key="commonButtonStyle" TargetType="Button">
            <Setter Property="BorderBrush" Value="{StaticResource SystemColorBrush}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="3" ShadowDepth="0"/>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{StaticResource SystemColorBrush}" CornerRadius="2">
                            <TextBlock x:Name="txt" Text="{TemplateBinding Content}" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource SystemColorBrush50}"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource SystemColorBrush50}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="{StaticResource SystemColorBrush}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>



    </Window.Resources>

    <Window.Effect>
        <DropShadowEffect BlurRadius="5" ShadowDepth="0"/>
    </Window.Effect>
    <Grid Background="AliceBlue">
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>

        <Grid Background="{StaticResource SystemColorBrush}" MouseDown="Grid_MouseDown">
            <TextBlock Text="{Binding ElementName=window,Path=Title}" HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10,0,0,0" Foreground="White" FontFamily="微软雅黑"/>
            <Button x:Name="closeBtn" Width="40" Height="30" HorizontalAlignment="Right" Click="Close_Click">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Grid x:Name="grid" Background="Transparent">
                            <Path x:Name="path" Data="M1,1 L13,13 M1,13 L13,1" FlowDirection="LeftToRight" Width="14" Height="14" Stretch="None" UseLayoutRounding="True" VerticalAlignment="Center" HorizontalAlignment="Center" Stroke="#FFF" StrokeThickness="2" />
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="grid" Property="Background" Value="#CCFF0000"/>
                                <Setter TargetName="path" Property="Stroke" Value="White"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="grid" Property="Background" Value="#AAFF0000"/>
                                <Setter TargetName="path" Property="Stroke" Value="White"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>
        </Grid>
        <Grid Grid.Row="1" Margin="20,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="50"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <Path Width="30" Height="30" Stretch="Uniform" Style="{Binding ImageStyle}" />
            <TextBlock Text="{Binding Message}" VerticalAlignment="Center" Grid.Column="1" TextWrapping="WrapWithOverflow" />
        </Grid>
        <StackPanel FlowDirection="RightToLeft" Orientation="Horizontal" Grid.Row="2" Margin="10,0">
            <Button x:Name="btnCancel" Style="{StaticResource simpleButtonStyle}" Content="取消" Width="70" Height="30" Margin="10" Command="{Binding HitCancel}" Visibility="{Binding ElementName=btnCancel,Path=IsEnabled,Converter={StaticResource booleanToVisibilityConverter}}"/>
            <Button x:Name="btnOK" Style="{StaticResource commonButtonStyle}" Content="确定" Width="70" Height="30" Margin="10" Command="{Binding HitOK}" Visibility="{Binding ElementName=btnOK,Path=IsEnabled,Converter={StaticResource booleanToVisibilityConverter}}"/>
            <Button x:Name="btnNO" Style="{StaticResource simpleButtonStyle}" Content="否" Width="70" Height="30" Margin="10" Command="{Binding HitNo}" Visibility="{Binding ElementName=btnNO,Path=IsEnabled,Converter={StaticResource booleanToVisibilityConverter}}"/>
            <Button x:Name="btnYES" Style="{StaticResource commonButtonStyle}" Content="是" Width="70" Height="30" Margin="10" Command="{Binding HitYes}" Visibility="{Binding ElementName=btnYES,Path=IsEnabled,Converter={StaticResource booleanToVisibilityConverter}}"/>
        </StackPanel>

        <Rectangle Grid.RowSpan="3" Stroke="Gray" StrokeThickness="1"/>
    </Grid>
</Window>
